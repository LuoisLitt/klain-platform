<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warehouse Display â€” Dura Fulfilment</title>
    <style>
        /* Self-hosted fonts (GDPR compliant) */
        @font-face {
            font-family: 'DM Sans';
            font-style: normal;
            font-weight: 300 700;
            font-display: swap;
            src: url('../fonts/dm-sans-latin.woff2') format('woff2');
        }
    </style>
    <style>
        :root {
            --black: #1d1d1f;
            --gray-dark: #6e6e73;
            --gray-medium: #86868b;
            --gray-light: #f5f5f7;
            --white: #ffffff;
            --blue: #0071e3;
            --blue-light: #e8f4fd;
            --green: #34c759;
            --green-light: #e8f8ed;
            --orange: #ff9500;
            --orange-light: #fff4e6;
            --red: #ff3b30;
            --red-light: #ffebea;
        }

        /* Dark Mode */
        body.dark-mode {
            --black: #f5f5f7;
            --gray-dark: #a1a1a6;
            --gray-medium: #8e8e93;
            --gray-light: #1c1c1e;
            --white: #2c2c2e;
            --blue-light: #1a2332;
            --green-light: #1a2e1a;
            --orange-light: #2e2410;
            --red-light: #2e1a1a;
        }

        body.dark-mode {
            background: #000000;
            color: #f5f5f7;
        }

        body.dark-mode .header,
        body.dark-mode .kpi-card,
        body.dark-mode .team-card,
        body.dark-mode .sidebar-card,
        body.dark-mode .footer {
            background: #1c1c1e;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .employee-card {
            background: #2c2c2e;
        }

        body.dark-mode .employee-card.top-performer {
            background: linear-gradient(135deg, #2e2a10 0%, #332e15 100%);
            border-color: #ffd60a;
        }

        body.dark-mode .stat-item {
            background: #3a3a3c;
        }

        body.dark-mode .employee-card.top-performer .stat-item {
            background: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .progress-bar {
            background: #3a3a3c;
        }

        body.dark-mode .clock {
            color: #f5f5f7;
        }

        body.dark-mode .back-link {
            background: #2c2c2e;
            color: #a1a1a6;
        }

        body.dark-mode .wms-badge {
            background: #2c2c2e;
            color: #a1a1a6;
        }

        body.dark-mode .alert-item.urgent {
            background: rgba(255, 59, 48, 0.15);
        }

        body.dark-mode .alert-item.warning {
            background: rgba(255, 149, 0, 0.15);
        }

        body.dark-mode .alert-item.info {
            background: rgba(0, 113, 227, 0.15);
        }

        .dark-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--gray-light);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-family: inherit;
            font-weight: 500;
            color: var(--gray-dark);
            transition: all 0.2s;
        }

        body.dark-mode .dark-toggle {
            background: #3a3a3c;
            color: #f5f5f7;
        }

        .dark-toggle:hover {
            opacity: 0.8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gray-light);
            color: var(--black);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            overflow: hidden;
        }

        .display-container {
            height: 100vh;
            padding: 32px;
            display: grid;
            grid-template-columns: 1fr 380px;
            grid-template-rows: auto 1fr auto;
            gap: 24px;
        }

        /* Header */
        .header {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--white);
            padding: 20px 32px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
            text-decoration: none;
            color: var(--black);
        }

        .logo span {
            color: var(--blue);
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--gray-light);
            color: var(--gray-dark);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
        }
        
        .back-link:hover {
            background: var(--blue-light);
            color: var(--blue);
        }
        
        .back-link svg {
            width: 16px;
            height: 16px;
        }

        .header-date {
            font-size: 16px;
            color: var(--gray-dark);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .live-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--green-light);
            border-radius: 20px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .live-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--green);
        }

        .clock {
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -1px;
            font-variant-numeric: tabular-nums;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* KPI Strip */
        .kpi-strip {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        .kpi-card {
            background: var(--white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            text-align: center;
        }

        .kpi-value {
            font-size: 48px;
            font-weight: 800;
            letter-spacing: -2px;
            line-height: 1;
            margin-bottom: 8px;
        }

        .kpi-value.blue { color: var(--blue); }
        .kpi-value.green { color: var(--green); }
        .kpi-value.orange { color: var(--orange); }
        .kpi-value.red { color: var(--red); }

        .kpi-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-dark);
        }

        .kpi-sublabel {
            font-size: 13px;
            color: var(--gray-medium);
            margin-top: 4px;
        }

        /* Team Performance */
        .team-card {
            flex: 1;
            background: var(--white);
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
        }

        .card-subtitle {
            font-size: 14px;
            color: var(--gray-medium);
            margin-top: 4px;
        }

        .wms-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: var(--gray-light);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-dark);
        }

        .wms-badge svg {
            width: 16px;
            height: 16px;
            stroke: var(--green);
        }

        /* Employee Grid */
        .employee-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            flex: 1;
        }

        .employee-card {
            background: var(--gray-light);
            border-radius: 14px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .employee-card.top-performer {
            background: linear-gradient(135deg, #fff9e6 0%, #fff4d6 100%);
            border: 2px solid #ffd60a;
        }

        .employee-card.top-performer::before {
            content: '';
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffd60a'%3E%3Cpath d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z'/%3E%3C/svg%3E") no-repeat center;
        }

        .employee-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 16px;
        }

        .employee-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .avatar-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .avatar-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .avatar-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .avatar-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .avatar-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .avatar-6 { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }

        .employee-info {
            flex: 1;
        }

        .employee-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .employee-role {
            font-size: 13px;
            color: var(--gray-medium);
        }

        .employee-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
            padding: 12px 8px;
            background: var(--white);
            border-radius: 10px;
        }

        .employee-card.top-performer .stat-item {
            background: rgba(255, 255, 255, 0.7);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--black);
            line-height: 1;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--gray-medium);
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .employee-progress {
            margin-top: auto;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-label {
            font-size: 12px;
            color: var(--gray-medium);
        }

        .progress-value {
            font-size: 13px;
            font-weight: 600;
            color: var(--black);
        }

        .progress-bar {
            height: 8px;
            background: var(--white);
            border-radius: 4px;
            overflow: hidden;
        }

        .employee-card.top-performer .progress-bar {
            background: rgba(255, 255, 255, 0.5);
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            background: var(--green);
            transition: width 0.5s ease;
        }

        .progress-fill.excellent { background: var(--green); }
        .progress-fill.good { background: var(--blue); }
        .progress-fill.warning { background: var(--orange); }

        /* Sidebar */
        .sidebar {
            grid-row: 2 / 4;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .sidebar-card {
            background: var(--white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .sidebar-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        /* Cutoff Timer */
        .cutoff-card {
            text-align: center;
            background: linear-gradient(135deg, var(--blue) 0%, #0077ed 100%);
            color: white;
        }

        .cutoff-card .sidebar-title {
            color: rgba(255, 255, 255, 0.8);
        }

        .cutoff-time {
            font-size: 56px;
            font-weight: 800;
            letter-spacing: -2px;
            margin-bottom: 8px;
            font-variant-numeric: tabular-nums;
        }

        .cutoff-label {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Hourly Chart */
        .hourly-chart {
            flex: 1;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            height: 160px;
            padding-top: 20px;
        }

        .chart-bar-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
        }

        .chart-bar {
            width: 100%;
            background: var(--blue);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            position: relative;
        }

        .chart-bar.current {
            background: var(--green);
        }

        .chart-bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            font-weight: 600;
            color: var(--black);
        }

        .chart-bar-label {
            margin-top: 8px;
            font-size: 11px;
            color: var(--gray-medium);
        }

        /* Alerts */
        .alerts-card {
            flex: 1;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .alert-item:last-child {
            margin-bottom: 0;
        }

        .alert-item.urgent {
            background: var(--red-light);
        }

        .alert-item.warning {
            background: var(--orange-light);
        }

        .alert-item.info {
            background: var(--blue-light);
        }

        .alert-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .alert-item.urgent .alert-icon { background: rgba(255, 59, 48, 0.15); }
        .alert-item.warning .alert-icon { background: rgba(255, 149, 0, 0.15); }
        .alert-item.info .alert-icon { background: rgba(0, 113, 227, 0.15); }

        .alert-icon svg {
            width: 16px;
            height: 16px;
        }

        .alert-item.urgent .alert-icon svg { stroke: var(--red); }
        .alert-item.warning .alert-icon svg { stroke: var(--orange); }
        .alert-item.info .alert-icon svg { stroke: var(--blue); }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .alert-subtitle {
            font-size: 12px;
            color: var(--gray-dark);
        }

        /* Footer */
        .footer {
            grid-column: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--white);
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .footer-stat {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .footer-stat-icon {
            width: 36px;
            height: 36px;
            background: var(--gray-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-stat-icon svg {
            width: 18px;
            height: 18px;
            stroke: var(--gray-dark);
        }

        .footer-stat-info {
            display: flex;
            flex-direction: column;
        }

        .footer-stat-value {
            font-size: 18px;
            font-weight: 700;
        }

        .footer-stat-label {
            font-size: 12px;
            color: var(--gray-medium);
        }

        /* Responsive - for smaller displays */
        @media (max-width: 1400px) {
            .display-container {
                padding: 20px;
                gap: 16px;
            }

            .employee-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .kpi-value {
                font-size: 36px;
            }
        }

        @media (max-width: 1024px) {
            .display-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                grid-row: auto;
                flex-direction: row;
            }

            .sidebar-card {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <script src="auth.js"></script>
    <div class="display-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <a href="index.html" class="back-link">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                    </svg>
                    Dashboard
                </a>
                <a href="index.html" class="logo">Dura <span>Fulfilment</span></a>
                <div class="header-date" id="currentDate">Woensdag 5 februari 2026</div>
            </div>
            <div class="header-right">
                <button class="dark-toggle" id="darkToggle" onclick="toggleDarkMode()">
                    <span id="darkIcon">ðŸŒ™</span>
                    <span id="darkLabel">Dark mode</span>
                </button>
                <div class="live-badge">
                    <div class="live-dot"></div>
                    <span class="live-text">Live uit Goedgepickt</span>
                </div>
                <div class="clock" id="clock">17:38:45</div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- KPI Strip (live) -->
            <div class="kpi-strip">
                <div class="kpi-card">
                    <div class="kpi-value blue" id="whOrdersToday">â€”</div>
                    <div class="kpi-label">Orders vandaag</div>
                    <div class="kpi-sublabel" id="whOrdersWeekLabel">Laden...</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value green" id="whShipped">â€”</div>
                    <div class="kpi-label">Verzonden vandaag</div>
                    <div class="kpi-sublabel" id="whShippedLabel">Live uit Goedgepickt</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value orange" id="whOpen">â€”</div>
                    <div class="kpi-label">Open orders</div>
                    <div class="kpi-sublabel">Wacht op verwerking</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value" id="whShipmentsWeek">â€”</div>
                    <div class="kpi-label">Verzendingen week</div>
                    <div class="kpi-sublabel">Totaal deze week</div>
                </div>
            </div>

            <!-- Top Webshops Performance (live) -->
            <div class="team-card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Top Webshops Vandaag</div>
                        <div class="card-subtitle">Orders per webshop â€” live uit Goedgepickt</div>
                    </div>
                    <div class="wms-badge">
                        <svg fill="none" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Live data
                    </div>
                </div>

                <div class="employee-grid" id="webshopGrid">
                    <div style="grid-column:1/-1;text-align:center;padding:60px 0;color:#86868b;">Laden...</div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Cutoff Timer -->
            <div class="sidebar-card cutoff-card">
                <div class="sidebar-title">Tijd tot cut-off</div>
                <div class="cutoff-time" id="cutoffTimer">06:21:15</div>
                <div class="cutoff-label">Cut-off: 23:59</div>
            </div>

            <!-- Hourly Performance -->
            <div class="sidebar-card hourly-chart">
                <div class="sidebar-title">Orders per uur</div>
                <div class="chart-bars">
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 45%">
                            <span class="chart-bar-value">58</span>
                        </div>
                        <span class="chart-bar-label">09u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 78%">
                            <span class="chart-bar-value">98</span>
                        </div>
                        <span class="chart-bar-label">10u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 95%">
                            <span class="chart-bar-value">121</span>
                        </div>
                        <span class="chart-bar-label">11u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 88%">
                            <span class="chart-bar-value">112</span>
                        </div>
                        <span class="chart-bar-label">12u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 55%">
                            <span class="chart-bar-value">70</span>
                        </div>
                        <span class="chart-bar-label">13u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 100%">
                            <span class="chart-bar-value">127</span>
                        </div>
                        <span class="chart-bar-label">14u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 92%">
                            <span class="chart-bar-value">118</span>
                        </div>
                        <span class="chart-bar-label">15u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: 85%">
                            <span class="chart-bar-value">108</span>
                        </div>
                        <span class="chart-bar-label">16u</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar current" style="height: 60%">
                            <span class="chart-bar-value">86</span>
                        </div>
                        <span class="chart-bar-label">17u</span>
                    </div>
                </div>
            </div>

            <!-- Alerts -->
            <div class="sidebar-card alerts-card">
                <div class="sidebar-title">Alerts</div>
                <div style="padding:16px;text-align:center;color:#86868b;font-size:13px;">Laden...</div>
            </div>
        </aside>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-stat">
                <div class="footer-stat-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="footer-stat-info">
                    <span class="footer-stat-value" id="footOrders">â€”</span>
                    <span class="footer-stat-label">Orders vandaag</span>
                </div>
            </div>
            <div class="footer-stat">
                <div class="footer-stat-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
                    </svg>
                </div>
                <div class="footer-stat-info">
                    <span class="footer-stat-value" id="footShipments">â€”</span>
                    <span class="footer-stat-label">Verzendingen vandaag</span>
                </div>
            </div>
            <div class="footer-stat">
                <div class="footer-stat-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                    </svg>
                </div>
                <div class="footer-stat-info">
                    <span class="footer-stat-value" id="footCompleted">â€”</span>
                    <span class="footer-stat-label">Afgerond vandaag</span>
                </div>
            </div>
            <div class="footer-stat">
                <div class="footer-stat-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="footer-stat-info">
                    <span class="footer-stat-value" id="footOpen">â€”</span>
                    <span class="footer-stat-label">Open orders</span>
                </div>
            </div>
        </footer>
    </div>

    <script>
        const API_BASE = window.DURA_API_BASE;
        const API_HEADERS = window.DURA_API_HEADERS;

        // ============ CLOCK & DATE ============
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
            
            const cutoff = new Date(now);
            cutoff.setHours(23, 59, 0, 0);
            const diff = cutoff - now;
            
            if (diff > 0) {
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                document.getElementById('cutoffTimer').textContent = 
                    `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
            }
        }
        
        function updateDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const date = new Date().toLocaleDateString('nl-NL', options);
            document.getElementById('currentDate').textContent = date.charAt(0).toUpperCase() + date.slice(1);
        }

        // ============ LIVE KPIs ============
        async function loadWarehouseData() {
            try {
                const res = await fetch(`${API_BASE}/api/dashboard`, { headers: API_HEADERS });
                if (!res.ok) throw new Error('Dashboard API error');
                const json = await res.json();
                const d = json.data;

                // KPI: Orders vandaag
                const ordersToday = d.orders ? d.orders.today : 0;
                document.getElementById('whOrdersToday').textContent = ordersToday.toLocaleString('nl-NL');
                document.getElementById('whOrdersWeekLabel').textContent = `${(d.orders ? d.orders.week : 0).toLocaleString('nl-NL')} deze week`;

                // KPI: Verzonden vandaag (completed + shipped)
                const byStatus = (d.orders && d.orders.by_status) || {};
                const shipped = (byStatus.completed || 0) + (byStatus.shipped || 0);
                document.getElementById('whShipped').textContent = shipped.toLocaleString('nl-NL');
                document.getElementById('whShippedLabel').textContent = `${((shipped / Math.max(ordersToday, 1)) * 100).toFixed(0)}% van orders`;

                // KPI: Open orders
                const open = (byStatus.open || 0) + (byStatus.ready_for_picking || 0) + (byStatus.picking || 0) + (byStatus.backorder || 0) + (byStatus.on_hold || 0);
                document.getElementById('whOpen').textContent = open.toLocaleString('nl-NL');

                // KPI: Verzendingen deze week
                const shipmentsWeek = d.shipments ? (d.shipments.week || d.shipments.today || 0) : 0;
                document.getElementById('whShipmentsWeek').textContent = shipmentsWeek.toLocaleString('nl-NL');

                // Footer stats
                const footOrders = document.getElementById('footOrders');
                const footShipments = document.getElementById('footShipments');
                const footCompleted = document.getElementById('footCompleted');
                const footOpen = document.getElementById('footOpen');
                if (footOrders) footOrders.textContent = ordersToday.toLocaleString('nl-NL');
                if (footShipments) footShipments.textContent = shipmentsWeek.toLocaleString('nl-NL');
                if (footCompleted) footCompleted.textContent = (byStatus.completed || 0).toLocaleString('nl-NL');
                if (footOpen) footOpen.textContent = open.toLocaleString('nl-NL');
            } catch (e) {
                console.log('Warehouse API niet beschikbaar:', e.message);
            }
        }

        // ============ ORDERS PER UUR (LIVE) ============
        async function loadHourlyChart() {
            try {
                const today = new Date().toISOString().slice(0, 10);
                // Haal alle orders van vandaag op (meerdere pagina's)
                let allOrders = [];
                let page = 1;
                let lastPage = 1;

                // Haal eerst pagina info op
                const probe = await fetch(`${API_BASE}/api/orders?created_after=${today}&page=1&limit=50`, { headers: API_HEADERS });
                if (!probe.ok) throw new Error('Orders API error');
                const probeJson = await probe.json();
                lastPage = probeJson.lastPage || 1;

                // Haal max 10 pagina's verspreid op voor een goede sample
                const pagesToFetch = Math.min(lastPage, 10);
                const pageStep = Math.max(1, Math.floor(lastPage / pagesToFetch));

                for (let i = 0; i < pagesToFetch; i++) {
                    const p = Math.min(1 + i * pageStep, lastPage);
                    const r = await fetch(`${API_BASE}/api/orders?created_after=${today}&page=${p}&limit=50`, { headers: API_HEADERS });
                    if (r.ok) {
                        const j = await r.json();
                        if (j.data) allOrders = allOrders.concat(j.data);
                    }
                }

                // Tel orders per uur
                const hourCounts = {};
                allOrders.forEach(o => {
                    if (o.createDate) {
                        const h = new Date(o.createDate).getHours();
                        hourCounts[h] = (hourCounts[h] || 0) + 1;
                    }
                });

                // Schaal op als we maar een sample hebben
                const totalFromApi = probeJson.total || allOrders.length;
                const scaleFactor = allOrders.length > 0 ? totalFromApi / allOrders.length : 1;

                // Bepaal welke uren te tonen (6:00 - huidige uur)
                const currentHour = new Date().getHours();
                const startHour = 6;
                const hours = [];
                for (let h = startHour; h <= currentHour; h++) {
                    hours.push(h);
                }

                if (hours.length === 0) return;

                // Bereken geschaalde waarden
                const values = hours.map(h => Math.round((hourCounts[h] || 0) * scaleFactor));
                const maxVal = Math.max(...values, 1);

                const chartContainer = document.querySelector('.chart-bars');
                chartContainer.textContent = '';

                hours.forEach((h, i) => {
                    const val = values[i];
                    const pct = (val / maxVal) * 100;
                    const isCurrent = h === currentHour;

                    const container = document.createElement('div');
                    container.className = 'chart-bar-container';
                    const bar = document.createElement('div');
                    bar.className = 'chart-bar' + (isCurrent ? ' current' : '');
                    bar.style.height = Math.max(pct, 3) + '%';
                    const valSpan = document.createElement('span');
                    valSpan.className = 'chart-bar-value';
                    valSpan.textContent = val;
                    bar.appendChild(valSpan);
                    const labelSpan = document.createElement('span');
                    labelSpan.className = 'chart-bar-label';
                    labelSpan.textContent = String(h).padStart(2, '0') + 'u';
                    container.appendChild(bar);
                    container.appendChild(labelSpan);
                    chartContainer.appendChild(container);
                });
            } catch (e) {
                console.log('Hourly chart niet beschikbaar:', e.message);
            }
        }

        // ============ LIVE ALERTS ============
        async function loadWarehouseAlerts() {
            try {
                const res = await fetch(API_BASE + '/api/inventory?low_stock_only=true', { headers: API_HEADERS });
                if (!res.ok) return;
                const json = await res.json();
                const products = json.data || [];

                if (products.length === 0) return;

                const alertsCard = document.querySelector('.alerts-card');
                const titleEl = alertsCard.querySelector('.sidebar-title');
                // Clear card but keep title
                while (alertsCard.firstChild) alertsCard.removeChild(alertsCard.firstChild);
                alertsCard.appendChild(titleEl);

                products.slice(0, 4).forEach(p => {
                    const stock = p.stockLevel || p.stock || 0;
                    const isCritical = stock <= 5;
                    const level = isCritical ? 'urgent' : 'warning';
                    const sku = p.sku || p.productName || '\u2014';
                    const name = p.productName || p.name || sku;
                    const svgPath = isCritical
                        ? 'M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z'
                        : 'M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z';

                    const div = document.createElement('div');
                    div.className = 'alert-item ' + level;

                    const iconDiv = document.createElement('div');
                    iconDiv.className = 'alert-icon';
                    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svg.setAttribute('fill', 'none');
                    svg.setAttribute('viewBox', '0 0 24 24');
                    svg.setAttribute('stroke-width', '1.5');
                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('stroke-linecap', 'round');
                    path.setAttribute('stroke-linejoin', 'round');
                    path.setAttribute('d', svgPath);
                    svg.appendChild(path);
                    iconDiv.appendChild(svg);

                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'alert-content';
                    const titleDiv = document.createElement('div');
                    titleDiv.className = 'alert-title';
                    titleDiv.textContent = isCritical ? 'Kritiek laag' : 'Voorraad laag';
                    const subtitleDiv = document.createElement('div');
                    subtitleDiv.className = 'alert-subtitle';
                    subtitleDiv.textContent = name + ': ' + stock + ' stuks';
                    contentDiv.appendChild(titleDiv);
                    contentDiv.appendChild(subtitleDiv);

                    div.appendChild(iconDiv);
                    div.appendChild(contentDiv);
                    alertsCard.appendChild(div);
                });
            } catch (e) {
                console.log('Warehouse alerts niet beschikbaar:', e.message);
            }
        }

        // ============ TOP WEBSHOPS ============
        const AVATAR_COLORS = ['avatar-1','avatar-2','avatar-3','avatar-4','avatar-5','avatar-6'];

        async function loadTopWebshops() {
            try {
                // Haal meerdere pagina's op voor een goede sample
                const today = new Date().toISOString().slice(0, 10);
                let allOrders = [];

                // Probe voor totaal
                const probe = await fetch(`${API_BASE}/api/orders?created_after=${today}&page=1&limit=50`, { headers: API_HEADERS });
                if (!probe.ok) throw new Error('API error');
                const probeJson = await probe.json();
                const lastPage = probeJson.lastPage || 1;
                const totalOrders = probeJson.total || 0;
                allOrders = allOrders.concat(probeJson.data || []);

                // Haal verspreid extra pagina's op voor betere sample
                const extraPages = Math.min(4, lastPage - 1);
                for (let i = 0; i < extraPages; i++) {
                    const p = Math.max(1, Math.round(lastPage * (i + 1) / (extraPages + 1)));
                    if (p === 1) continue;
                    const r = await fetch(`${API_BASE}/api/orders?created_after=${today}&page=${p}&limit=50`, { headers: API_HEADERS });
                    if (r.ok) {
                        const j = await r.json();
                        if (j.data) allOrders = allOrders.concat(j.data);
                    }
                }

                // Tel per webshop
                const shops = {};
                allOrders.forEach(o => {
                    const name = o.webshopName || 'Onbekend';
                    if (!shops[name]) shops[name] = { orders: 0, items: 0, revenue: 0 };
                    shops[name].orders++;
                    shops[name].items += (o.products ? o.products.length : 0);
                    shops[name].revenue += parseFloat(o.totalPaid || 0);
                });

                // Schaal op
                const scaleFactor = allOrders.length > 0 ? totalOrders / allOrders.length : 1;

                // Sorteer en pak top 6
                const sorted = Object.entries(shops)
                    .sort((a, b) => b[1].orders - a[1].orders)
                    .slice(0, 6);

                const maxOrders = sorted.length > 0 ? sorted[0][1].orders : 1;
                const grid = document.getElementById('webshopGrid');
                grid.textContent = '';

                sorted.forEach(([name, data], i) => {
                    const initials = name.split(/[\s.-]+/).map(w => w[0]).join('').toUpperCase().slice(0, 2);
                    const scaledOrders = Math.round(data.orders * scaleFactor);
                    const scaledItems = Math.round(data.items * scaleFactor);
                    const scaledRevenue = (data.revenue * scaleFactor).toFixed(0);
                    const pct = Math.round((data.orders / maxOrders) * 100);
                    const isTop = i === 0;
                    const progressClass = pct >= 80 ? 'excellent' : pct >= 50 ? 'good' : 'warning';

                    const card = document.createElement('div');
                    card.className = 'employee-card' + (isTop ? ' top-performer' : '');

                    // Header
                    const header = document.createElement('div');
                    header.className = 'employee-header';
                    const avatar = document.createElement('div');
                    avatar.className = 'employee-avatar ' + AVATAR_COLORS[i % 6];
                    avatar.textContent = initials;
                    const info = document.createElement('div');
                    info.className = 'employee-info';
                    const nameDiv = document.createElement('div');
                    nameDiv.className = 'employee-name';
                    nameDiv.textContent = name;
                    const roleDiv = document.createElement('div');
                    roleDiv.className = 'employee-role';
                    roleDiv.textContent = 'Webshop';
                    info.appendChild(nameDiv);
                    info.appendChild(roleDiv);
                    header.appendChild(avatar);
                    header.appendChild(info);

                    // Stats
                    const stats = document.createElement('div');
                    stats.className = 'employee-stats';
                    var statOrders = document.createElement('div');
                    statOrders.className = 'stat-item';
                    var sv1 = document.createElement('div');
                    sv1.className = 'stat-value';
                    sv1.textContent = scaledOrders;
                    var sl1 = document.createElement('div');
                    sl1.className = 'stat-label';
                    sl1.textContent = 'Orders';
                    statOrders.appendChild(sv1);
                    statOrders.appendChild(sl1);
                    var statItems = document.createElement('div');
                    statItems.className = 'stat-item';
                    var sv2 = document.createElement('div');
                    sv2.className = 'stat-value';
                    sv2.textContent = scaledItems;
                    var sl2 = document.createElement('div');
                    sl2.className = 'stat-label';
                    sl2.textContent = 'Items';
                    statItems.appendChild(sv2);
                    statItems.appendChild(sl2);
                    stats.appendChild(statOrders);
                    stats.appendChild(statItems);

                    // Progress
                    const progress = document.createElement('div');
                    progress.className = 'employee-progress';
                    const progHeader = document.createElement('div');
                    progHeader.className = 'progress-header';
                    const progLabel = document.createElement('span');
                    progLabel.className = 'progress-label';
                    progLabel.textContent = '\u20AC' + Number(scaledRevenue).toLocaleString('nl-NL') + ' omzet';
                    const progValue = document.createElement('span');
                    progValue.className = 'progress-value';
                    progValue.textContent = pct + '%';
                    progHeader.appendChild(progLabel);
                    progHeader.appendChild(progValue);
                    const progBar = document.createElement('div');
                    progBar.className = 'progress-bar';
                    const progFill = document.createElement('div');
                    progFill.className = 'progress-fill ' + progressClass;
                    progFill.style.width = pct + '%';
                    progBar.appendChild(progFill);
                    progress.appendChild(progHeader);
                    progress.appendChild(progBar);

                    card.appendChild(header);
                    card.appendChild(stats);
                    card.appendChild(progress);
                    grid.appendChild(card);
                });
            } catch (e) {
                console.log('Webshops laden mislukt:', e.message);
                const grid = document.getElementById('webshopGrid');
                grid.textContent = '';
                const empty = document.createElement('div');
                empty.style.cssText = 'grid-column:1/-1;text-align:center;padding:60px 0;color:#86868b;';
                empty.textContent = 'Niet beschikbaar';
                grid.appendChild(empty);
            }
        }

        // ============ DARK MODE (Feature 10) ============
        function toggleDarkMode() {
            const isDark = document.body.classList.toggle('dark-mode');
            localStorage.setItem('warehouse_dark_mode', isDark ? '1' : '0');
            updateDarkToggleUI(isDark);
        }

        function updateDarkToggleUI(isDark) {
            const icon = document.getElementById('darkIcon');
            const label = document.getElementById('darkLabel');
            if (icon) icon.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
            if (label) label.textContent = isDark ? 'Light mode' : 'Dark mode';
        }

        // Restore preference
        (function() {
            const pref = localStorage.getItem('warehouse_dark_mode');
            if (pref === '1') {
                document.body.classList.add('dark-mode');
                updateDarkToggleUI(true);
            }
        })();

        // ============ INIT ============
        updateClock();
        updateDate();
        setInterval(updateClock, 1000);

        // Load live data
        loadWarehouseData();
        loadHourlyChart();
        loadWarehouseAlerts();
        loadTopWebshops();

        // Auto-refresh elke 60 seconden
        setInterval(() => {
            loadWarehouseData();
            loadHourlyChart();
            loadWarehouseAlerts();
            loadTopWebshops();
        }, 60000);
    </script>
<script src="ai-insights.js"></script>
</body>
</html>
